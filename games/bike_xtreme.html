<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-799SFZRQXD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-799SFZRQXD');
    </script>

    <link rel="canonical" href="https://www.unblockdev.com/games/bike_xtreme">
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=yes" />
    <meta name="description" content="Play Bike Xtreme - Unblocked Dev">
    <meta property="og:title" content="Play Bike Xtreme - Unblocked Dev">
    <meta property="og:description" content="Enjoy the thrilling Bike Xtreme game unblocked!">
    <meta property="og:image" content="/img/bikextremeicon.avif">
    <title>Play Bike Xtreme - Unblocked Dev</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest" />
    
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link rel="preload"
        href="https://fonts.googleapis.com/css2?family=Archivo+Black&amp;family=Poppins:wght@100;200;300;400;500;600;700&amp;display=swap"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Archivo+Black&amp;family=Poppins:wght@100;200;300;400;500;600;700&amp;display=swap">
    </noscript>
    
    <!-- Overlay Scrollbars -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.13.1/css/OverlayScrollbars.css"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.13.1/css/OverlayScrollbars.css">
    </noscript>
    
    <!-- Bootstrap -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" as="style"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    </noscript>
    
    <!-- Custom CSS -->
    <link rel="preload" href="../index.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="../index.css">
    </noscript>
    
    <style>
        body {
            background-color: #0e0e11;
            color: white;
            font-family: 'Poppins', sans-serif;
            padding-top: 80px;
            margin: 0;
        }
        
        .page-container {
            max-width: 1400px;
            width: 96%;
            margin: 0 auto;
            padding: 0 10px;
            padding-top: 80px;
        }
        
        .game-layout {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            justify-content: center;
        }
        
        /* Main game container */
        .game-main {
            flex: 1 1 750px;
            min-width: 300px;
            max-width: 900px;
        }
        
        #game-container {
            width: 100%;
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        iframe {
            width: 100%;
            height: 600px;
            border: none;
            display: block;
        }
        
        /* Sidebar for suggested games */
        .game-sidebar {
            flex: 1 1 300px;
            min-width: 280px;
            max-width: 300px;
            height: 600px;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-section {
            background-color: #1c1c23;
            border-radius: 10px;
            padding: 15px;
            height: 100%;
            overflow-y: auto;
        }
        
        /* Game suggestion layout */
        .game-suggestions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            justify-content: center;
            height: 100%;
            overflow-y: auto;
        }
        
        /* Matching the exact round button style from index.html */
        .game-suggestion {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            background-size: cover;
            background-position: center;
            margin: 0 auto;
        }
        
        .game-suggestion:hover {
            transform: scale(1.04);
        }
        
        .game-suggestion:active {
            transform: scale(0.96);
        }
        
        .game-suggestion::after {
            background: linear-gradient(#0000 25%, #0000004d);
            border-radius: 16px;
            bottom: 0;
            contain: strict;
            content: "";
            height: 100%;
            left: 0;
            opacity: 0;
            position: absolute;
            transition: opacity .3s;
            width: 100%;
            will-change: opacity, box-shadow;
            z-index: 1;
        }
        
        .game-suggestion:hover::after {
            opacity: 1; /* Show the dimming overlay */
        }
        
        .game-suggestion .game-name {
            position: absolute;
            bottom: 0px;
            left: 0;
            right: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
            transition: bottom 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
            font-family: 'Poppins', sans-serif;
            z-index: 2;
            padding: 0 5px;
        }
        
        .game-suggestion:hover .game-name {
            bottom: 8px;
            opacity: 1;
        }
        
        /* Toast notification */
        #toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 14px;
        }
        
        #toast.success {
            background-color: #4caf50;
        }
        
        #toast.error {
            background-color: #f44336;
        }

        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Game info section */
        .game-info {
            background-color: #1c1c23;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 1220px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .game-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .game-header-left {
            flex: 1 1 70%;
            min-width: 250px;
        }
        
        .game-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .game-meta {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 10px;
            color: #8a8a8a;
            font-size: 14px;
        }
        
        .game-category {
            color: #0a84ff;
            font-weight: 500;
        }
        
        .game-header-right {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 10px 0;
        }
        
        .action-button {
            background-color: #272730;
            border: none;
            border-radius: 6px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 18px;
            transition: background-color 0.2s, color 0.2s;
        }
        
        .action-button:hover {
            background-color: #3a3a45;
        }
        
        .action-button.like.active {
            color: #4caf50;
        }
        
        .action-button.dislike.active {
            color: #f44336;
        }
        
        .action-button.like:hover {
            color: #4caf50;
        }
        
        .action-button.dislike:hover {
            color: #f44336;
        }
        
        .action-button.fullscreen:hover {
            color: #0a84ff;
        }
        
        .game-stats {
            display: flex;
            gap: 15px;
            margin-top: 5px;
            color: #8a8a8a;
            font-size: 14px;
            flex-wrap: wrap;
        }
        
        .game-stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .game-description {
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .game-tabs {
            border-bottom: 1px solid #272730;
            display: flex;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .game-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 3px solid transparent;
            transition: border-color 0.2s;
        }
        
        .game-tab.active {
            border-color: #0a84ff;
            color: #0a84ff;
        }
        
        .tab-content {
            display: none;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .faq-item {
            margin-bottom: 15px;
        }
        
        .faq-question {
            font-weight: 600;
            margin-bottom: 5px;
            color: #0a84ff;
        }
        
        /* Navigation bar styles exactly matching index.html */
        .navbar {
            padding: 0 !important;
            margin: 0 !important;     
            position: fixed !important;
            height: 60px; 
            background: rgba(30, 30, 38, 0.5);
            backdrop-filter: blur(20px);
            width: 100%;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            flex-direction: row;
            align-items: center;
            flex-flow: wrap;
            justify-content: space-between;
            z-index: 10;
        }
        
       #gameSearch {
            box-shadow: 0px 0px;
            font-weight: 500;
            fill: #AAADBE;
            border-radius: 30px;
            padding-left: 15px;
            height: 40px;
            background-color: #353641;
            border-color: transparent;
            font-size: 16px;
            color: #AAADBE;
        }
        
        .search-container {
            position: relative; 
            margin: 0 auto;
            width: 30%;
        }

        .search-results {
            position: absolute; 
            margin-top: 20px; 
            width: 100%; 
            background: #1c1c23; 
            display: none; 
            border-radius: 10px; 
            max-height: 305px; 
            overflow-y: auto;
        }

        .search-results::-webkit-scrollbar {
            display: none;
        }
        
        .search-item {
            display: flex; 
            align-items: center; 
            padding: 10px; 
            cursor: pointer;
        }

        .search-item:hover {
            background: rgba(128, 128, 128, 0.5);
        }
        
        .search-item:last-child {
            border-bottom: none;
        }
        
        /* Navbar buttons container */
        .navbar-buttons {
            display: flex;
            align-items: center;
            padding-right: 20px;
        }
        
        .navbar-buttons a {
            margin-left: 15px;
        }
        
        /* Fix for fullscreen button */
        .action-button.fullscreen {
            z-index: 5;
        }
        
        /* Scrollbar styling */
        .game-suggestions::-webkit-scrollbar {
            width: 6px;
        }
        
        .game-suggestions::-webkit-scrollbar-track {
            background: #1c1c23;
        }
        
        .game-suggestions::-webkit-scrollbar-thumb {
            background: #3a3a45;
            border-radius: 3px;
        }
        
        .game-suggestions::-webkit-scrollbar-thumb:hover {
            background: #4a4a58;
        }
        
        /* Responsive adjustments */
        @media (max-width: 1400px) {
            .page-container {
                max-width: 100%;
                padding: 0 15px;
                padding-top: 80px;
            }
        }
        
        @media (max-width: 992px) {
            .game-layout {
                flex-direction: column;
                align-items: center;
            }
            
            .game-main {
                max-width: 100%;
            }
            
            .game-sidebar {
                max-width: 100%;
                height: auto;
                width: 100%;
            }
            
            .sidebar-section {
                height: 300px;
            }
            
            .game-suggestions {
                grid-template-columns: repeat(4, 120px);
                gap: 15px;
            }
        }
        
        @media (max-width: 768px) {
            .game-suggestions {
                grid-template-columns: repeat(3, 120px);
            }
            
            iframe {
                height: 450px;
            }
            
            .search-container {
                max-width: 200px;
            }
            
            body {
                padding-top: 70px;
            }
            
            .page-container {
                padding-top: 60px;
            }
        }
        
        @media (max-width: 576px) {
            .page-container {
                padding: 0 10px;
                padding-top: 60px;
            }
            
            .game-suggestions {
                grid-template-columns: repeat(2, 120px);
            }
            
            iframe {
                height: 350px;
            }
            
            .game-title {
                font-size: 24px;
            }
            
            .search-container {
                max-width: 150px;
            }
            
            .game-header-right {
                width: 100%;
                justify-content: flex-end;
                margin-top: 15px;
            }
            
            .game-tab {
                padding: 8px 10px;
                font-size: 12px;
            }
        }

        /* Navbar specific fix for mobile */
        @media (max-width: 470px) {
            .navbar img {
                height: 30px;
                width: auto;
            }
            
            #gameSearch {
                font-size: 12px;
                height: 30px;
            }
            
            .search-container {
                max-width: 120px;
            }
        }
        
        /* Game stats in two rows on mobile */
        @media (max-width: 400px) {
            .game-stats {
                display: grid;
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Loading indicators for stats */
        .stats-loading {
            display: inline-block;
            width: 10px;
            height: 10px;
            border: 2px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 2px;
            margin-right: 2px;
        }
    </style>
</head>
<body style="padding: 0px;">
    <div id="toast"></div>
    
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="top">
        <div style="display:flex; flex-direction:row; align-items:center; padding-left: 15px;">
            <a href="https://www.unblockdev.com/">
                <img src="/img/Home-Button.svg" alt="Home" height="40" width="40">
            </a>
            <a href="/" style="margin-left: 8px;">
                <img src="/img/UnblockDeck-Logo.svg" alt="Icon" height="40">
            </a>
        </div>
        <div class="search-container">
            <input type="text" id="gameSearch" class="form-control" placeholder="Search" onkeyup="filterGames()" autocomplete="off">
            <div id="searchResults" class="search-results">
                <!-- Search results will appear here -->
            </div>
        </div>
        
        <div style="display: flex; flex-direction: row; justify-content: flex-end; padding-right: 20px; padding-left: 8px; align-items: center;">
            <a href="#Play" onclick='nav("Play")' style="margin-right: 8px;">
                <img src="/img/Play-Button.svg" alt="Play Now" height="40" width="40">
            </a>
            <a href="https://www.unblockdev.com/copyright" style="margin-right: 8px;">
                <img src="/img/Copyright-Button.svg" alt="Copyright" height="40" width="40">
            </a>
            <a href="#Request" onclick='nav("Request")'>
                <img src="/img/Request-Button.svg" alt="Request Games" height="40">
            </a>
        </div>
    </nav>
    
    <main class="page-container">
        <div class="game-layout">
            <div class="game-main">
                <div id="game-container">
                    <iframe src="https://1games.io/game/bike-xtreme/" allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="game-sidebar">
                <div class="sidebar-section">
                    <div class="game-suggestions" id="game-suggestions">
                        <!-- Game suggestions will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="game-info">
            <div class="game-header">
                <div class="game-header-left">
                    <h1 class="game-title">Bike Xtreme</h1>
                    <div class="game-meta">
                        <span class="game-category">Racing</span>
                        <span class="game-creator">by 1Games</span>
                    </div>
                    <div class="game-stats">
                        <div class="game-stat">
                            <i class="far fa-eye"></i>
                            <span id="view-count">0</span>
                        </div>
                        <div class="game-stat">
                            <i class="far fa-thumbs-up"></i>
                            <span id="like-count">0</span>
                        </div>
                        <div class="game-stat">
                            <i class="far fa-thumbs-down"></i>
                            <span id="dislike-count">0</span>
                        </div>
                    </div>
                </div>
                <div class="game-header-right">
                    <button class="action-button like" id="like-button" title="Like">
                        <i class="far fa-thumbs-up"></i>
                    </button>
                    <button class="action-button dislike" id="dislike-button" title="Dislike">
                        <i class="far fa-thumbs-down"></i>
                    </button>
                    <button class="action-button fullscreen" id="fullscreen-button" title="Fullscreen">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
            
            <div class="game-description">
                Master extreme bike stunts and navigate challenging terrains in Bike Xtreme! Race through thrilling courses, perform incredible tricks, and push your biking skills to the limit. Experience realistic physics and exciting gameplay in this adrenaline-pumping motorcycle racing game.
            </div>
            
            <div class="game-tabs">
                <div class="game-tab active" data-tab="how-to-play">How to Play</div>
                <div class="game-tab" data-tab="controls">Controls</div>
                <div class="game-tab" data-tab="faq">FAQ</div>
            </div>
            
            <div class="tab-content active" id="how-to-play">
                <p>Bike Xtreme challenges you to master motorcycle racing through extreme terrains and obstacles. Navigate through challenging courses while maintaining balance and speed.</p>
                <p>Complete each level by reaching the finish line without crashing. The game features realistic physics that make every jump, turn, and landing crucial to your success.</p>
                <p>Earn points by completing levels quickly and performing stunts. Use your skills to overcome ramps, hills, and various obstacles!</p>
            </div>
            
            <div class="tab-content" id="controls">
                <p>Use the following controls to play Bike Xtreme:</p>
                <ul>
                    <li>Up Arrow / W Key: Accelerate forward</li>
                    <li>Down Arrow / S Key: Brake/Reverse</li>
                    <li>Left Arrow / A Key: Lean backward</li>
                    <li>Right Arrow / D Key: Lean forward</li>
                    <li>Space: Restart level after crashing</li>
                </ul>
                <p>Master the balance between speed and control to successfully navigate through each challenging course.</p>
            </div>
            
            <div class="tab-content" id="faq">
                <div class="faq-item">
                    <div class="faq-question">How do I avoid crashing in Bike Xtreme?</div>
                    <div class="faq-answer">Maintain proper balance by using the lean controls. Approach jumps and obstacles at appropriate speeds and land smoothly to avoid crashes.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">What happens if I crash?</div>
                    <div class="faq-answer">When you crash, you can restart the level by pressing the space bar or clicking the restart button to try again.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">The game isn't loading, what should I do?</div>
                    <div class="faq-answer">Try refreshing the page. If issues persist, make sure your browser is up to date and has JavaScript enabled.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Are there different bikes to choose from?</div>
                    <div class="faq-answer">The game features various motorcycle options that may become available as you progress through different levels and challenges.</div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="py-4 bg-dark text-white text-center">
        <p class="m-0">Made by Doldrumszz | <a href="/" class="text-white">Back to Home</a></p>
    </footer>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // Firebase Configuration and Game Stats Management
        (function() {
            // Initialize Firebase
            firebase.initializeApp({
                apiKey: "AIzaSyBT6waqal-sHQLZIvQa-sK5fduXua7L7vg",
                authDomain: "unblockdev-75c1b.firebaseapp.com",
                projectId: "unblockdev-75c1b",
                storageBucket: "unblockdev-75c1b.firebasestorage.app",
                messagingSenderId: "238555417450",
                appId: "1:238555417450:web:61a3ddc3eafb900eb8f313",
                databaseURL: "https://unblockdev-75c1b-default-rtdb.asia-southeast1.firebasedatabase.app/"
            });

            // Core game data
            const DB = firebase.database();
            const GAME_ID = window.location.pathname.split('/').pop() || 'bike-xtreme';
            const GAME_DATA = {
                id: GAME_ID,
                name: document.querySelector('.game-title').textContent || 'Game',
                path: window.location.pathname
            };
            
            // User data management
            const USER_DATA = {
                liked: false,
                disliked: false,
                id: getUserOrCreateId(),
                sessionId: 'session_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now()
            };
            
            // Game catalog
            const GAMES = [
                { name: "1v1 LOL", image: "/img/1v1.avif", url: "/games/1v1" },
                { name: "2048", image: "/img/2048.avif", url: "/games/2048" },
                { name: "8-Ball", image: "/img/8ball.avif", url: "/games/8-ball" },
                { name: "Basket Random", image: "/img/basket.avif", url: "/games/basketrandom" },
                { name: "Run 3", image: "/img/run3.avif", url: "/games/run3" },
                { name: "Crossy Road", image: "/img/crossyroad.avif", url: "/games/crossyroad" },
                { name: "Moto X3M", image: "/img/moto.avif", url: "/games/moto-x3m" },
                { name: "Paper Io", image: "/img/paper.avif", url: "/games/paperio" },
                { name: "Subway Surfers", image: "/img/subway-surfers.avif", url: "/games/subway-surfers" },
                { name: "Vex 4", image: "/img/vex-4.avif", url: "/games/vex4" },
                { name: "Drift Boss", image: "/img/driftboss.avif", url: "/games/drift-boss" },
                { name: "Doodle Jump", image: "/img/doodle.avif", url: "/games/doodlejump" },
                { name: "Soccer Random", image: "/img/soccerrandom.avif", url: "/games/soccerrandom" },
                { name: "Retro Bowl", image: "/img/retro-bowl.avif", url: "/games/retro-bowl" },
                { name: "Slither Io", image: "/img/slither-io.avif", url: "/games/slither-io" },
                { name: "Final Earth 2", image: "/img/the-final-earth-2-game-icon.avif", url: "/games/finalearth2" }
            ];
            
            // Database references
            const DB_REFS = {
                game: DB.ref(`games/${GAME_DATA.id}`),
                stats: DB.ref(`games/${GAME_DATA.id}/stats`),
                userRating: DB.ref(`ratings/${GAME_DATA.id}/${USER_DATA.id}`),
                gameViews: DB.ref(`gameViews/${GAME_DATA.id}`),
                gameClicks: DB.ref(`gameClicks/${GAME_DATA.id}`)
            };
            
            // UI Elements
            const UI = {
                toast: document.getElementById('toast'),
                viewCount: document.getElementById('view-count'),
                likeCount: document.getElementById('like-count'),
                dislikeCount: document.getElementById('dislike-count'),
                likeButton: document.getElementById('like-button'),
                dislikeButton: document.getElementById('dislike-button'),
                fullscreenButton: document.getElementById('fullscreen-button'),
                gameContainer: document.getElementById('game-container'),
                iframe: document.querySelector('#game-container iframe'),
                suggestions: document.getElementById('game-suggestions'),
                searchInput: document.getElementById('gameSearch'),
                searchResults: document.getElementById('searchResults'),
                tabs: document.querySelectorAll('.game-tab')
            };
            
            // Initialization
            function init() {
                initializeGameEntry();
                trackGameView();
                populateGameSuggestions();
                setupEventListeners();
                setupTabSwitching();
                
                console.log("Current date: 2025-05-14 11:08:00");
                console.log("Current User's Login: doldrumszz");
            }
            
            // Create game entry if it doesn't exist
            function initializeGameEntry() {
                DB_REFS.game.once('value', snapshot => {
                    if (!snapshot.exists()) {
                        DB_REFS.game.set({
                            name: GAME_DATA.name,
                            path: GAME_DATA.path,
                            created: firebase.database.ServerValue.TIMESTAMP,
                            stats: {
                                views: 0,
                                likes: 0,
                                dislikes: 0
                            }
                        });
                    }
                });
            }
            
            // Track game view
            function trackGameView() {
                showLoadingIndicators();
                
                const sessionKey = `views_${GAME_DATA.id}`;
                if (!sessionStorage.getItem(sessionKey)) {
                    sessionStorage.setItem(sessionKey, '1');
                    
                    // Increment view count atomically
                    DB_REFS.stats.transaction(currentData => {
                        if (!currentData) {
                            return { views: 1, likes: 0, dislikes: 0 };
                        }
                        return {
                            views: (currentData.views || 0) + 1,
                            likes: currentData.likes || 0,
                            dislikes: currentData.dislikes || 0
                        };
                    });
                    
                    // Log analytics
                    DB_REFS.gameViews.push({
                        timestamp: firebase.database.ServerValue.TIMESTAMP,
                        userId: USER_DATA.id
                    });
                }
                
                // Set up listeners for real-time updates
                setupStatsListener();
                checkUserRating();
            }
            
            // Listen for stats updates
            function setupStatsListener() {
                DB_REFS.stats.on('value', snapshot => {
                    const stats = snapshot.val() || { views: 0, likes: 0, dislikes: 0 };
                    UI.viewCount.textContent = formatNumber(stats.views || 0);
                    UI.likeCount.textContent = formatNumber(stats.likes || 0);
                    UI.dislikeCount.textContent = formatNumber(stats.dislikes || 0);
                });
            }
            
            // Check if user has already rated
            function checkUserRating() {
                DB_REFS.userRating.once('value', snapshot => {
                    const rating = snapshot.val();
                    if (rating) {
                        USER_DATA.liked = rating.liked || false;
                        USER_DATA.disliked = rating.disliked || false;
                        updateRatingUI();
                    }
                });
            }
            
            // Handle user ratings
            function handleRating(type) {
                showLoadingIndicators(true);
                
                DB_REFS.userRating.once('value', snapshot => {
                    const currentRating = snapshot.val() || { liked: false, disliked: false };
                    let updatedRating = { ...currentRating };
                    let likeChange = 0;
                    let dislikeChange = 0;
                    
                    // Determine the rating changes
                    if (type === 'like') {
                        if (currentRating.liked) {
                            updatedRating.liked = false;
                            likeChange = -1;
                            showToast("Like removed", "default");
                        } else {
                            updatedRating.liked = true;
                            likeChange = 1;
                            showToast("Liked!", "success");
                            if (currentRating.disliked) {
                                updatedRating.disliked = false;
                                dislikeChange = -1;
                            }
                        }
                    } else if (type === 'dislike') {
                        if (currentRating.disliked) {
                            updatedRating.disliked = false;
                            dislikeChange = -1;
                            showToast("Dislike removed", "default");
                        } else {
                            updatedRating.disliked = true;
                            dislikeChange = 1;
                            showToast("Disliked", "error");
                            if (currentRating.liked) {
                                updatedRating.liked = false;
                                likeChange = -1;
                            }
                        }
                    }
                    
                    // Update user data and UI
                    USER_DATA.liked = updatedRating.liked;
                    USER_DATA.disliked = updatedRating.disliked;
                    updateRatingUI();
                    
                    // Save to database
                    DB_REFS.userRating.set({
                        liked: updatedRating.liked,
                        disliked: updatedRating.disliked,
                        timestamp: firebase.database.ServerValue.TIMESTAMP,
                        userId: USER_DATA.id
                    });
                    
                    // Update game stats atomically
                    DB_REFS.stats.transaction(currentStats => {
                        if (!currentStats) {
                            return { 
                                views: 0, 
                                likes: Math.max(0, likeChange), 
                                dislikes: Math.max(0, dislikeChange) 
                            };
                        }
                        return {
                            views: currentStats.views || 0,
                            likes: Math.max(0, (currentStats.likes || 0) + likeChange),
                            dislikes: Math.max(0, (currentStats.dislikes || 0) + dislikeChange)
                        };
                    });
                });
            }
            
            // Track game suggestion clicks
            function trackGameClick(targetGameName) {
                DB_REFS.gameClicks.push({
                    sourceGame: GAME_DATA.name,
                    targetGame: targetGameName,
                    timestamp: firebase.database.ServerValue.TIMESTAMP,
                    userId: USER_DATA.id
                });
            }
            
            // Populate game suggestions
            function populateGameSuggestions() {
                const shuffledGames = shuffle(GAMES);
                const filteredGames = shuffledGames.filter(game => !window.location.pathname.includes(game.url));
                const gamesToShow = filteredGames.slice(0, 8);
                
                UI.suggestions.innerHTML = '';
                
                gamesToShow.forEach(game => {
                    const gameElement = document.createElement('div');
                    gameElement.className = 'game-suggestion';
                    gameElement.style.backgroundImage = `url('${game.image}')`;
                    gameElement.onclick = () => { 
                        trackGameClick(game.name);
                        window.location.href = game.url; 
                    };
                    
                    const gameName = document.createElement('div');
                    gameName.className = 'game-name';
                    gameName.textContent = game.name;
                    
                    gameElement.appendChild(gameName);
                    UI.suggestions.appendChild(gameElement);
                });
            }
            
            // Game search functionality
            function filterGames() {
                const filter = UI.searchInput.value.toUpperCase();
                
                if (filter.length < 1) {
                    UI.searchResults.style.display = "none";
                    return;
                }
                
                let html = '';
                let matchCount = 0;
                
                GAMES.forEach(game => {
                    if (game.name.toUpperCase().indexOf(filter) > -1 && matchCount < 8) {
                        html += `<div class="search-item" onclick="window.location.href='${game.url}'">${game.name}</div>`;
                        matchCount++;
                    }
                });
                
                if (matchCount > 0) {
                    UI.searchResults.innerHTML = html;
                    UI.searchResults.style.display = "block";
                } else {
                    UI.searchResults.style.display = "none";
                }
            }
            
            // Setup event listeners
            function setupEventListeners() {
                // Rating buttons
                UI.likeButton.addEventListener('click', () => handleRating('like'));
                UI.dislikeButton.addEventListener('click', () => handleRating('dislike'));
                
                // Fullscreen button
                UI.fullscreenButton.addEventListener('click', toggleFullscreen);
                
                // Search functionality
                document.addEventListener('click', closeSearchOnClickOutside);
            }
            
            // Setup tab switching
            function setupTabSwitching() {
                UI.tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        UI.tabs.forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        tab.classList.add('active');
                        document.getElementById(tab.dataset.tab).classList.add('active');
                    });
                });
            }
            
            // Helper Functions
            function getUserOrCreateId() {
                let userId = localStorage.getItem('unblockedUserId');
                if (!userId) {
                    userId = 'user_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('unblockedUserId', userId);
                }
                return userId;
            }
            
            function showToast(message, type = 'default', duration = 2000) {
                UI.toast.textContent = message;
                UI.toast.className = type;
                UI.toast.style.display = 'block';
                setTimeout(() => { UI.toast.style.display = 'none'; }, duration);
            }
            
            function showLoadingIndicators(ratingOnly = false) {
                if (!ratingOnly) UI.viewCount.innerHTML = '<span class="stats-loading"></span>';
                UI.likeCount.innerHTML = '<span class="stats-loading"></span>';
                UI.dislikeCount.innerHTML = '<span class="stats-loading"></span>';
            }
            
            function updateRatingUI() {
                if (USER_DATA.liked) {
                    UI.likeButton.classList.add('active');
                    UI.likeButton.innerHTML = '<i class="fas fa-thumbs-up"></i>';
                } else {
                    UI.likeButton.classList.remove('active');
                    UI.likeButton.innerHTML = '<i class="far fa-thumbs-up"></i>';
                }
                
                if (USER_DATA.disliked) {
                    UI.dislikeButton.classList.add('active');
                    UI.dislikeButton.innerHTML = '<i class="fas fa-thumbs-down"></i>';
                } else {
                    UI.dislikeButton.classList.remove('active');
                    UI.dislikeButton.innerHTML = '<i class="far fa-thumbs-down"></i>';
                }
            }
            
            function toggleFullscreen() {
                if (UI.iframe.requestFullscreen) UI.iframe.requestFullscreen();
                else if (UI.iframe.mozRequestFullScreen) UI.iframe.mozRequestFullScreen();
                else if (UI.iframe.webkitRequestFullscreen) UI.iframe.webkitRequestFullscreen();
                else if (UI.iframe.msRequestFullscreen) UI.iframe.msRequestFullscreen();
            }
            
            function closeSearchOnClickOutside(event) {
                if (event.target !== UI.searchInput && event.target !== UI.searchResults && !UI.searchResults.contains(event.target)) {
                    UI.searchResults.style.display = 'none';
                }
            }
            
            function formatNumber(num) {
                if (num >= 1000000) return (num / 1000000).toFixed(1).replace(/\.0$/, '') + 'M';
                if (num >= 1000) return (num / 1000).toFixed(1).replace(/\.0$/, '') + 'K';
                return num.toString();
            }
            
            function shuffle(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            }
            
            function nav(section) {
                window.location.href = `/#${section}`;
            }
            
            // Initialize everything when DOM is ready
            window.addEventListener('DOMContentLoaded', init);
            
            // Expose necessary functions to global scope
            window.filterGames = filterGames;
            window.nav = nav;
        })();
    </script>
</body>
</html>
