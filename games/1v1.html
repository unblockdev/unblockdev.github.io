<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-799SFZRQXD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-799SFZRQXD');
    </script>

    <link rel="canonical" href="https://www.unblockdev.com/games/1v1">
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no" />
    <meta name="description" content="Play 1v1 LOL - Unblocked Dev">
    <meta property="og:title" content="Play 1v1 LOL - Unblocked Dev">
    <meta property="og:description" content="Enjoy the thrilling building battle game 1v1 LOL unblocked!">
    <meta property="og:image" content="/img/1v1.avif">
    <title>Play 1v1 LOL - Unblocked Dev</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest" />
    
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link rel="preload"
        href="https://fonts.googleapis.com/css2?family=Archivo+Black&amp;family=Poppins:wght@100;200;300;400;500;600;700&amp;display=swap"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Archivo+Black&amp;family=Poppins:wght@100;200;300;400;500;600;700&amp;display=swap">
    </noscript>
    
    <!-- Overlay Scrollbars -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.13.1/css/OverlayScrollbars.css"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.13.1/css/OverlayScrollbars.css">
    </noscript>
    
    <!-- Bootstrap -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" as="style"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    </noscript>
    
    <!-- Custom CSS -->
    <link rel="preload" href="../index.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="../index.css">
    </noscript>
    
    <style>
        .ad-container {
            width: 160px;
            height: 600px;
            background-color: #1c1c23;
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            transition: opacity 0.3s ease, width 0.3s ease, height 0.3s ease; /* Smooth transitions */
        }
        
        /* Responsive adjustments for ads with smoother breakpoints */
        @media (max-width: 1200px) {
            .ad-container {
                width: 120px; /* Slightly smaller on smaller screens */
            }
        }

        @media (max-width: 992px) {
            .right-ad-container {
                display: none; /* Hide right ad on medium screens */
            }
            
            .left-ad-container {
                width: 160px; /* Restore left ad width on medium screens */
            }
            
            .game-layout {
                justify-content: space-between; /* Better spacing when one ad is hidden */
            }
        }
        
        @media (max-width: 768px) {
            .ad-container {
                height: 450px; /* Match the game height on smaller screens */
            }
            
            /* Use JS to decide which ad to show based on performance */
            .left-ad-container {
                opacity: 0.95; /* Slightly less intrusive on smaller screens */
            }
        }
        
        @media (max-width: 576px) {
            .ad-container {
                height: 350px; /* Match the game height on mobile */
            }
        }

        /* Hide all ads on very small screens (mobile) */
        @media (max-width: 480px) {
            .ad-container {
                display: none;
            }
            
            .game-layout {
                justify-content: center;
            }
            
            .game-main {
                width: 100%; /* Game takes full width when ads are hidden */
            }
        }
        
        body {
            background-color: #0e0e11;
            color: white;
            font-family: 'Poppins', sans-serif;
            padding-top: 80px;
            margin: 0;
        }
        
        .page-container {
            max-width: 1400px;
            width: 96%;
            margin: 0 auto;
            padding: 0 10px;
            padding-top: 80px;
        }
        
        .game-layout {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            justify-content: center;
            min-height: 600px; /* Ensure minimum height matches the largest ad height */
            transition: all 0.3s ease; /* Smooth transition for layout changes */
        }
        
        /* Main game container */
        .game-main {
            flex: 1 1 750px;
            min-width: 300px;
            max-width: 900px;
        }
        
        #game-container {
            width: 100%;
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        iframe {
            width: 100%;
            height: 600px;
            border: none;
            display: block;
        }
        
        /* Sidebar for suggested games */
        .game-sidebar {
            flex: 1 1 300px;
            min-width: 280px;
            max-width: 300px;
            height: 600px;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-section {
            background-color: #1c1c23;
            border-radius: 10px;
            padding: 15px;
            height: 100%;
            overflow-y: auto;
        }
        
        /* Game suggestion layout */
        .game-suggestions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            justify-content: center;
            height: 100%;
            overflow-y: auto;
        }
        
        /* Matching the exact round button style from index.html */
        .game-suggestion {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            background-size: cover;
            background-position: center;
            margin: 0 auto;
        }
        
        .game-suggestion:hover {
            transform: scale(1.04);
        }
        
        .game-suggestion:active {
            transform: scale(0.96);
        }
        
        .game-suggestion::after {
            background: linear-gradient(#0000 25%, #0000004d);
            border-radius: 16px;
            bottom: 0;
            contain: strict;
            content: "";
            height: 100%;
            left: 0;
            opacity: 0;
            position: absolute;
            transition: opacity .3s;
            width: 100%;
            will-change: opacity, box-shadow;
            z-index: 1;
        }
        
        .game-suggestion:hover::after {
            opacity: 1; /* Show the dimming overlay */
        }
        
        .game-suggestion .game-name {
            position: absolute;
            bottom: 0px;
            left: 0;
            right: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
            transition: bottom 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
            font-family: 'Poppins', sans-serif;
            z-index: 2;
            padding: 0 5px;
        }
        
        .game-suggestion:hover .game-name {
            bottom: 8px;
            opacity: 1;
        }
        
        /* Toast notification */
        #toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 14px;
        }
        
        #toast.success {
            background-color: #4caf50;
        }
        
        #toast.error {
            background-color: #f44336;
        }

        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Game info section */
        .game-info {
            background-color: #1c1c23;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 1220px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .game-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .game-header-left {
            flex: 1 1 70%;
            min-width: 250px;
        }
        
        .game-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .game-meta {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 10px;
            color: #8a8a8a;
            font-size: 14px;
        }
        
        .game-category {
            color: #0a84ff;
            font-weight: 500;
        }
        
        .game-header-right {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 10px 0;
        }
        
        .action-button {
            background-color: #272730;
            border: none;
            border-radius: 6px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 18px;
            transition: background-color 0.2s, color 0.2s;
        }
        
        .action-button:hover {
            background-color: #3a3a45;
        }
        
        .action-button.like.active {
            color: #4caf50;
        }
        
        .action-button.dislike.active {
            color: #f44336;
        }
        
        .action-button.like:hover {
            color: #4caf50;
        }
        
        .action-button.dislike:hover {
            color: #f44336;
        }
        
        .action-button.fullscreen:hover {
            color: #0a84ff;
        }
        
        .game-stats {
            display: flex;
            gap: 15px;
            margin-top: 5px;
            color: #8a8a8a;
            font-size: 14px;
            flex-wrap: wrap;
        }
        
        .game-stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .game-description {
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .game-tabs {
            border-bottom: 1px solid #272730;
            display: flex;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .game-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 3px solid transparent;
            transition: border-color 0.2s;
        }
        
        .game-tab.active {
            border-color: #0a84ff;
            color: #0a84ff;
        }
        
        .tab-content {
            display: none;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .faq-item {
            margin-bottom: 15px;
        }
        
        .faq-question {
            font-weight: 600;
            margin-bottom: 5px;
            color: #0a84ff;
        }
        
        /* Navigation bar styles exactly matching index.html */
        .navbar {
            padding: 0 !important;
            margin: 0 !important;     
            position: fixed !important;
            height: 60px; 
            background: rgba(30, 30, 38, 0.5);
            backdrop-filter: blur(20px);
            width: 100%;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            flex-direction: row;
            align-items: center;
            flex-flow: wrap;
            justify-content: space-between;
            z-index: 10;
        }
        
       #gameSearch {
            box-shadow: 0px 0px;
            font-weight: 500;
            fill: #AAADBE;
            border-radius: 30px;
            padding-left: 15px;
            height: 40px;
            background-color: #353641;
            border-color: transparent;
            font-size: 16px;
            color: #AAADBE;
        }
        
        .search-container {
            position: relative; 
            margin: 0 auto;
            width: 30%;
        }

        .search-results {
            position: absolute; 
            margin-top: 20px; 
            width: 100%; 
            background: #1c1c23; 
            display: none; 
            border-radius: 10px; 
            max-height: 305px; 
            overflow-y: auto;
        }

        .search-results::-webkit-scrollbar {
            display: none;
        }
        
        .search-item {
            display: flex; 
            align-items: center; 
            padding: 10px; 
            cursor: pointer;
        }

        .search-item:hover {
            background: rgba(128, 128, 128, 0.5);
        }
        
        .search-item:last-child {
            border-bottom: none;
        }
        
        /* Navbar buttons container */
        .navbar-buttons {
            display: flex;
            align-items: center;
            padding-right: 20px;
        }
        
        .navbar-buttons a {
            margin-left: 15px;
        }
        
        /* Fix for fullscreen button */
        .action-button.fullscreen {
            z-index: 5;
        }
        
        /* Scrollbar styling */
        .game-suggestions::-webkit-scrollbar {
            width: 6px;
        }
        
        .game-suggestions::-webkit-scrollbar-track {
            background: #1c1c23;
        }
        
        .game-suggestions::-webkit-scrollbar-thumb {
            background: #3a3a45;
            border-radius: 3px;
        }
        
        .game-suggestions::-webkit-scrollbar-thumb:hover {
            background: #4a4a58;
        }
        
        /* Responsive adjustments */
        @media (max-width: 1400px) {
            .page-container {
                max-width: 100%;
                padding: 0 15px;
                padding-top: 80px;
            }
        }
        
        /* Additional responsive adjustments for game layout */
        @media (min-width: 993px) and (max-width: 1200px) {
            .game-main {
                flex: 1 1 650px; /* Slightly smaller game area on medium-large screens */
            }
        }
        
        @media (max-width: 992px) {
            .game-layout {
                flex-direction: column;
                align-items: center;
            }
            
            .game-main {
                max-width: 100%;
            }
            
            .game-sidebar {
                max-width: 100%;
                height: auto;
                width: 100%;
            }
            
            .sidebar-section {
                height: 300px;
            }
            
            .game-suggestions {
                grid-template-columns: repeat(4, 120px);
                gap: 15px;
            }
        }
        
        @media (max-width: 768px) {
            .game-suggestions {
                grid-template-columns: repeat(3, 120px);
            }
            
            iframe {
                height: 450px;
            }
            
            .search-container {
                max-width: 200px;
            }
            
            body {
                padding-top: 70px;
            }
            
            .page-container {
                padding-top: 60px;
            }
        }
        
        @media (max-width: 576px) {
            .page-container {
                padding: 0 10px;
                padding-top: 60px;
            }
            
            .game-suggestions {
                grid-template-columns: repeat(2, 120px);
            }
            
            iframe {
                height: 350px;
            }
            
            .game-title {
                font-size: 24px;
            }
            
            .search-container {
                max-width: 150px;
            }
            
            .game-header-right {
                width: 100%;
                justify-content: flex-end;
                margin-top: 15px;
            }
            
            .game-tab {
                padding: 8px 10px;
                font-size: 12px;
            }
        }

        /* Navbar specific fix for mobile */
        @media (max-width: 470px) {
            .navbar img {
                height: 30px;
                width: auto;
            }
            
            #gameSearch {
                font-size: 12px;
                height: 30px;
            }
            
            .search-container {
                max-width: 120px;
            }
        }
        
        /* Game stats in two rows on mobile */
        @media (max-width: 400px) {
            .game-stats {
                display: grid;
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Loading indicators for stats */
        .stats-loading {
            display: inline-block;
            width: 10px;
            height: 10px;
            border: 2px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 2px;
            margin-right: 2px;
        }
    </style>
</head>
<body style="padding: 0px;">
    <div id="toast"></div>
    
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="top">
        <div style="display:flex; flex-direction:row; align-items:center; padding-left: 15px;">
            <a href="https://www.unblockdev.com/">
                <img src="/img/Home-Button.svg" alt="Home" height="40" width="40">
            </a>
            <a href="/" style="margin-left: 8px;">
                <img src="/img/UnblockDeck-Logo.svg" alt="Icon" height="40">
            </a>
        </div>
        <div class="search-container">
            <input type="text" id="gameSearch" class="form-control" placeholder="Search" onkeyup="filterGames()" autocomplete="off">
            <div id="searchResults" class="search-results">
                <!-- Search results will appear here -->
            </div>
        </div>
        
        <div style="display: flex; flex-direction: row; justify-content: flex-end; padding-right: 20px; padding-left: 8px; align-items: center;">
            <a href="#Play" onclick='nav("Play")' style="margin-right: 8px;">
                <img src="/img/Play-Button.svg" alt="Play Now" height="40" width="40">
            </a>
            <a href="https://www.unblockdev.com/copyright" style="margin-right: 8px;">
                <img src="/img/Copyright-Button.svg" alt="Copyright" height="40" width="40">
            </a>
            <a href="#Request" onclick='nav("Request")'>
                <img src="/img/Request-Button.svg" alt="Request Games" height="40">
            </a>
        </div>
    </nav>
    
    <main class="page-container">        
        <div class="game-layout">
            <div class="ad-container left-ad-container">
                <script type="text/javascript">
                    atOptions = {
                        'key' : '841547081300995a877864a53370bada',
                        'format' : 'iframe',
                        'height' : 600,
                        'width' : 160,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/841547081300995a877864a53370bada/invoke.js"></script>
            </div>
            <div class="game-main">
                <div id="game-container">
                    <iframe src="https://coolubg.github.io/coolubg-list/1v1.lol/" allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="game-sidebar">
                <div class="sidebar-section">
                    <div class="game-suggestions" id="game-suggestions">
                        <!-- Game suggestions will be populated by JavaScript -->
                    </div>
                </div>
            </div>
            <div class="ad-container right-ad-container">
                <script type="text/javascript">
                    atOptions = {
                        'key' : '841547081300995a877864a53370bada',
                        'format' : 'iframe',
                        'height' : 600,
                        'width' : 160,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/841547081300995a877864a53370bada/invoke.js"></script>
            </div>
        </div>

        <div class="game-info">
            <div class="game-header">
                <div class="game-header-left">
                    <h1 class="game-title">1v1 LOL</h1>
                    <div class="game-meta">
                        <span class="game-category">Action</span>
                        <span class="game-creator">by JustPlay.LOL</span>
                    </div>
                    <div class="game-stats">
                        <div class="game-stat">
                            <i class="far fa-eye"></i>
                            <span id="view-count">0</span>
                        </div>
                        <div class="game-stat">
                            <i class="far fa-thumbs-up"></i>
                            <span id="like-count">0</span>
                        </div>
                        <div class="game-stat">
                            <i class="far fa-thumbs-down"></i>
                            <span id="dislike-count">0</span>
                        </div>
                    </div>
                </div>
                <div class="game-header-right">
                    <button class="action-button like" id="like-button" title="Like">
                        <i class="far fa-thumbs-up"></i>
                    </button>
                    <button class="action-button dislike" id="dislike-button" title="Dislike">
                        <i class="far fa-thumbs-down"></i>
                    </button>
                    <button class="action-button fullscreen" id="fullscreen-button" title="Fullscreen">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
            
            <div class="game-description">
                1v1 LOL is a fast-paced building battle game where you can challenge friends or random players to intense 1v1 matches. Build structures, find weapons, and outplay your opponents in thi[...]
            </div>
            
            <div class="game-tabs">
                <div class="game-tab active" data-tab="how-to-play">How to Play</div>
                <div class="game-tab" data-tab="controls">Controls</div>
                <div class="game-tab" data-tab="faq">FAQ</div>
            </div>
            
            <div class="tab-content active" id="how-to-play">
                <p>1v1 LOL is a building battle game where your goal is to outbuild and outshoot your opponent.</p>
                <p>To play:</p>
                <ol>
                    <li>Choose a game mode: 1v1, Box Fight, Party mode, or Practice</li>
                    <li>Use the WASD keys to move and mouse to aim</li>
                    <li>Use Q, E, R, and F keys to build walls, floors, ramps, and pyramids</li>
                    <li>Collect weapons and eliminate your opponents</li>
                    <li>Last player standing wins!</li>
                </ol>
                <p>Master the art of quick building and shooting to become the champion!</p>
            </div>
            
            <div class="tab-content" id="controls">
                <p>Use the following controls to play 1v1 LOL:</p>
                <ul>
                    <li>W/A/S/D: Move your character</li>
                    <li>Space: Jump</li>
                    <li>Left Mouse Button: Shoot</li>
                    <li>Right Mouse Button: Aim/Target</li>
                    <li>Q: Build Wall</li>
                    <li>E: Build Floor</li>
                    <li>R: Build Ramp</li>
                    <li>F: Build Pyramid</li>
                    <li>1-5: Switch Weapons</li>
                    <li>Shift: Sprint</li>
                    <li>C: Crouch</li>
                </ul>
                <p>You can also click the fullscreen button in the top right to enjoy the game in fullscreen mode.</p>
            </div>
            
            <div class="tab-content" id="faq">
                <div class="faq-item">
                    <div class="faq-question">How do I get better at building?</div>
                    <div class="faq-answer">Use the Practice mode to get familiar with the building mechanics. Focus on learning common build patterns like "90s" and "edit courses." Building quickly i[...]
                </div>
                <div class="faq-item">
                    <div class="faq-question">Can I play with my friends?</div>
                    <div class="faq-answer">Yes! Choose the Party mode and share your room code with friends to play together. You can have up to 4 players in a match.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">The game is running slow, what can I do?</div>
                    <div class="faq-answer">Try lowering the graphic settings in the options menu. Close other browser tabs and applications to free up memory. Also, make sure your browser is up to da[...]
                </div>
                <div class="faq-item">
                    <div class="faq-question">What's the difference between game modes?</div>
                    <div class="faq-answer">1v1 mode is a standard duel between two players. Box Fight confines the battle to a smaller area. Party mode allows up to 4 players in free-for-all combat. [...]
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="py-4 bg-dark text-white text-center">
        <p class="m-0">Made by Doldrumszz | <a href="/" class="text-white">Back to Home</a></p>
    </footer>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // Firebase Configuration and Game Stats Management
        (function() {
            // Initialize Firebase
            firebase.initializeApp({
                apiKey: "AIzaSyBT6waqal-sHQLZIvQa-sK5fduXua7L7vg",
                authDomain: "unblockdev-75c1b.firebaseapp.com",
                projectId: "unblockdev-75c1b",
                storageBucket: "unblockdev-75c1b.firebasestorage.app",
                messagingSenderId: "238555417450",
                appId: "1:238555417450:web:61a3ddc3eafb900eb8f313",
                databaseURL: "https://unblockdev-75c1b-default-rtdb.asia-southeast1.firebasedatabase.app/"
            });

            // Core game data
            const DB = firebase.database();
            const GAME_ID = window.location.pathname.split('/').pop() || '1v1';
            const GAME_DATA = {
                id: GAME_ID,
                name: document.querySelector('.game-title').textContent || 'Game',
                path: window.location.pathname
            };
            
            // User data management
            const USER_DATA = {
                liked: false,
                disliked: false,
                id: getUserOrCreateId(),
                sessionId: 'session_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now()
            };
            
            // Game catalog
            const GAMES = [
                { name: "1v1 LOL", image: "/img/1v1.avif", url: "/games/1v1" },
                { name: "2048", image: "/img/2048.avif", url: "/games/2048" },
                { name: "8-Ball", image: "/img/8ball.avif", url: "/games/8-ball" },
                { name: "Basket Random", image: "/img/basket.avif", url: "/games/basketrandom" },
                { name: "Run 3", image: "/img/run3.avif", url: "/games/run3" },
                { name: "Crossy Road", image: "/img/crossyroad.avif", url: "/games/crossyroad" },
                { name: "Moto X3M", image: "/img/moto.avif", url: "/games/moto-x3m" },
                { name: "Paper Io", image: "/img/paper.avif", url: "/games/paperio" },
                { name: "Subway Surfers", image: "/img/subway-surfers.avif", url: "/games/subway-surfers" },
                { name: "Vex 4", image: "/img/vex-4.avif", url: "/games/vex4" },
                { name: "Drift Boss", image: "/img/driftboss.avif", url: "/games/drift-boss" },
                { name: "Doodle Jump", image: "/img/doodle.avif", url: "/games/doodlejump" },
                { name: "Soccer Random", image: "/img/soccerrandom.avif", url: "/games/soccerrandom" },
                { name: "Retro Bowl", image: "/img/retro-bowl.avif", url: "/games/retro-bowl" },
                { name: "Slither Io", image: "/img/slither-io.avif", url: "/games/slither-io" },
                { name: "Final Earth 2", image: "/img/the-final-earth-2-game-icon.avif", url: "/games/finalearth2" }
            ];
            
            // Database references
            const DB_REFS = {
                game: DB.ref(`games/${GAME_DATA.id}`),
                stats: DB.ref(`games/${GAME_DATA.id}/stats`),
                userRating: DB.ref(`ratings/${GAME_DATA.id}/${USER_DATA.id}`),
                gameViews: DB.ref(`gameViews/${GAME_DATA.id}`),
                gameClicks: DB.ref(`gameClicks/${GAME_DATA.id}`)
            };
            
            // UI Elements
            const UI = {
                toast: document.getElementById('toast'),
                viewCount: document.getElementById('view-count'),
                likeCount: document.getElementById('like-count'),
                dislikeCount: document.getElementById('dislike-count'),
                likeButton: document.getElementById('like-button'),
                dislikeButton: document.getElementById('dislike-button'),
                fullscreenButton: document.getElementById('fullscreen-button'),
                gameContainer: document.getElementById('game-container'),
                iframe: document.querySelector('#game-container iframe'),
                suggestions: document.getElementById('game-suggestions'),
                searchInput: document.getElementById('gameSearch'),
                searchResults: document.getElementById('searchResults'),
                tabs: document.querySelectorAll('.game-tab')
            };
            
            // Initialization
            function init() {
                initializeGameEntry();
                trackGameView();
                populateGameSuggestions();
                setupEventListeners();
                setupTabSwitching();
                
                console.log("Current date: 2025-05-14 11:44:07");
                console.log("Current User's Login: doldrumszz");
            }
            
            // Create game entry if it doesn't exist
            function initializeGameEntry() {
                DB_REFS.game.once('value', snapshot => {
                    if (!snapshot.exists()) {
                        DB_REFS.game.set({
                            name: GAME_DATA.name,
                            path: GAME_DATA.path,
                            created: firebase.database.ServerValue.TIMESTAMP,
                            stats: {
                                views: 0,
                                likes: 0,
                                dislikes: 0
                            }
                        });
                    }
                });
            }
            
            // Track game view
            function trackGameView() {
                showLoadingIndicators();
                
                const sessionKey = `views_${GAME_DATA.id}`;
                if (!sessionStorage.getItem(sessionKey)) {
                    sessionStorage.setItem(sessionKey, '1');
                    
                    // Increment view count atomically
                    DB_REFS.stats.transaction(currentData => {
                        if (!currentData) {
                            return { views: 1, likes: 0, dislikes: 0 };
                        }
                        return {
                            views: (currentData.views || 0) + 1,
                            likes: currentData.likes || 0,
                            dislikes: currentData.dislikes || 0
                        };
                    });
                    
                    // Log analytics
                    DB_REFS.gameViews.push({
                        timestamp: firebase.database.ServerValue.TIMESTAMP,
                        userId: USER_DATA.id
                    });
                }
                
                // Set up listeners for real-time updates
                setupStatsListener();
                checkUserRating();
            }
            
            // Listen for stats updates
            function setupStatsListener() {
                DB_REFS.stats.on('value', snapshot => {
                    const stats = snapshot.val() || { views: 0, likes: 0, dislikes: 0 };
                    UI.viewCount.textContent = formatNumber(stats.views || 0);
                    UI.likeCount.textContent = formatNumber(stats.likes || 0);
                    UI.dislikeCount.textContent = formatNumber(stats.dislikes || 0);
                });
            }
            
            // Check if user has already rated
            function checkUserRating() {
                DB_REFS.userRating.once('value', snapshot => {
                    const rating = snapshot.val();
                    if (rating) {
                        USER_DATA.liked = rating.liked || false;
                        USER_DATA.disliked = rating.disliked || false;
                        updateRatingUI();
                    }
                });
            }
            
            // Responsive ad handling
            function handleAdResponsiveness() {
                const isMobile = window.matchMedia('(max-width: 480px)').matches;
                const isTablet = window.matchMedia('(max-width: 768px)').matches;
                const adContainers = document.querySelectorAll('.ad-container');
                const gameLayout = document.querySelector('.game-layout');
                
                // Handle ad containers based on screen size
                if (isMobile) {
                    // Mobile: Hide all ads and center game
                    adContainers.forEach(container => {
                        container.style.display = 'none';
                    });
                    if (gameLayout) {
                        gameLayout.style.justifyContent = 'center';
                    }
                } else if (isTablet) {
                    // Tablet: Show left ad only, adjust layout
                    adContainers.forEach(container => {
                        if (container.classList.contains('right-ad-container')) {
                            container.style.display = 'none';
                        } else {
                            container.style.display = 'flex';
                        }
                    });
                } else {
                    // Desktop: Show all ads if they exist
                    adContainers.forEach(container => {
                        container.style.display = 'flex';
                    });
                }
            }
            
            // Check if ads loaded correctly and adjust if needed
            function checkAdLoading() {
                const adContainers = document.querySelectorAll('.ad-container');
                
                adContainers.forEach(container => {
                    // If ad iframe doesn't load properly, hide the container
                    const adIframe = container.querySelector('iframe');
                    if (adIframe) {
                        adIframe.addEventListener('error', function() {
                            container.style.display = 'none';
                            handleAdResponsiveness(); // Readjust layout
                        });
                    }
                });
            }
            
            // Format numbers (1000 -> 1k)
            function formatNumber(num) {
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(1) + 'M';
                }
                if (num >= 1000) {
                    return (num / 1000).toFixed(1) + 'K';
                }
                return num.toString();
            }
            
            // Show loading indicators for stats
            function showLoadingIndicators() {
                UI.viewCount.innerHTML = '<span class="stats-loading"></span>';
                UI.likeCount.innerHTML = '<span class="stats-loading"></span>';
                UI.dislikeCount.innerHTML = '<span class="stats-loading"></span>';
            }
            
            // Update rating UI (like/dislike buttons)
            function updateRatingUI() {
                if (USER_DATA.liked) {
                    UI.likeButton.classList.add('active');
                    UI.dislikeButton.classList.remove('active');
                } else if (USER_DATA.disliked) {
                    UI.likeButton.classList.remove('active');
                    UI.dislikeButton.classList.add('active');
                } else {
                    UI.likeButton.classList.remove('active');
                    UI.dislikeButton.classList.remove('active');
                }
            }
            
            // Populate game suggestions
            function populateGameSuggestions() {
                // Get random games excluding the current game
                const shuffled = GAMES.filter(game => game.url !== window.location.pathname).sort(() => 0.5 - Math.random());
                const selected = shuffled.slice(0, 8); // Show 8 game suggestions
                
                UI.suggestions.innerHTML = '';
                selected.forEach(game => {
                    const gameElement = document.createElement('div');
                    gameElement.className = 'game-suggestion';
                    gameElement.style.backgroundImage = `url("${game.image}")`;
                    gameElement.onclick = () => window.location.href = game.url;
                    
                    const gameName = document.createElement('div');
                    gameName.className = 'game-name';
                    gameName.textContent = game.name;
                    
                    gameElement.appendChild(gameName);
                    UI.suggestions.appendChild(gameElement);
                });
            }
            
            // Setup event listeners
            function setupEventListeners() {
                // Rating buttons
                UI.likeButton.addEventListener('click', () => handleRating('like'));
                UI.dislikeButton.addEventListener('click', () => handleRating('dislike'));
                
                // Fullscreen button
                UI.fullscreenButton.addEventListener('click', toggleFullscreen);
                
                // Add event listener for window resize
                let resizeTimeout;
                window.addEventListener('resize', function() {
                    // Debounce resize event for better performance
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(handleAdResponsiveness, 100);
                });
                
                // Initialize responsive handling
                handleAdResponsiveness();
                checkAdLoading();
            }
            
            // Handle user rating (like/dislike)
            function handleRating(type) {
                const wasLiked = USER_DATA.liked;
                const wasDisliked = USER_DATA.disliked;
                
                // Update user data
                if (type === 'like') {
                    USER_DATA.liked = !wasLiked;
                    USER_DATA.disliked = false;
                } else {
                    USER_DATA.disliked = !wasDisliked;
                    USER_DATA.liked = false;
                }
                
                // Update database
                DB_REFS.userRating.set({
                    liked: USER_DATA.liked,
                    disliked: USER_DATA.disliked,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                
                // Update stats atomically
                DB_REFS.stats.transaction(currentData => {
                    if (!currentData) {
                        return { views: 0, likes: 0, dislikes: 0 };
                    }
                    
                    let { views, likes, dislikes } = currentData;
                    
                    // Adjust likes/dislikes based on previous and current state
                    if (type === 'like') {
                        if (wasLiked) {
                            likes = Math.max(0, (likes || 0) - 1);
                        } else {
                            likes = (likes || 0) + 1;
                            if (wasDisliked) {
                                dislikes = Math.max(0, (dislikes || 0) - 1);
                            }
                        }
                    } else {
                        if (wasDisliked) {
                            dislikes = Math.max(0, (dislikes || 0) - 1);
                        } else {
                            dislikes = (dislikes || 0) + 1;
                            if (wasLiked) {
                                likes = Math.max(0, (likes || 0) - 1);
                            }
                        }
                    }
                    
                    return { views, likes, dislikes };
                });
                
                // Update UI
                updateRatingUI();
                showToast(type === 'like' ? 
                    (USER_DATA.liked ? 'Game liked!' : 'Like removed') : 
                    (USER_DATA.disliked ? 'Game disliked' : 'Dislike removed'));
            }
            
            // Toggle fullscreen for the game
            function toggleFullscreen() {
                const container = UI.gameContainer;
                
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                } else if (container.requestFullscreen) {
                    container.requestFullscreen();
                } else if (container.mozRequestFullScreen) {
                    container.mozRequestFullScreen();
                } else if (container.webkitRequestFullscreen) {
                    container.webkitRequestFullscreen();
                } else if (container.msRequestFullscreen) {
                    container.msRequestFullscreen();
                }
            }
            
            // Show toast notification
            function showToast(message, type = 'success') {
                const toast = UI.toast;
                toast.textContent = message;
                toast.className = type;
                toast.style.display = 'block';
                
                setTimeout(() => {
                    toast.style.opacity = '0';
                    setTimeout(() => {
                        toast.style.display = 'none';
                        toast.style.opacity = '1';
                    }, 300);
                }, 2000);
            }
            
            // Setup tab switching
            function setupTabSwitching() {
                UI.tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const tabId = tab.getAttribute('data-tab');
                        
                        // Update active tab
                        UI.tabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        // Update active content
                        document.querySelectorAll('.tab-content').forEach(content => {
                            content.classList.remove('active');
                        });
                        document.getElementById(tabId).classList.add('active');
                    });
                });
            }
            
            // Get or create user ID
            function getUserOrCreateId() {
                const storageKey = 'unblockdev_user_id';
                let userId = localStorage.getItem(storageKey);
                
                if (!userId) {
                    userId = 'user_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
                    localStorage.setItem(storageKey, userId);
                }
                
                return userId;
            }
            
            // Filter games for search
            window.filterGames = function() {
                const query = UI.searchInput.value.toLowerCase();
                const results = document.getElementById('searchResults');
                
                if (query.length < 2) {
                    results.style.display = 'none';
                    return;
                }
                
                // Filter games based on search query
                const matchingGames = GAMES.filter(game => 
                    game.name.toLowerCase().includes(query)
                );
                
                // Clear previous results
                results.innerHTML = '';
                
                // Display new results
                if (matchingGames.length > 0) {
                    matchingGames.forEach(game => {
                        const item = document.createElement('div');
                        item.className = 'search-item';
                        item.innerHTML = `
                            <img src="${game.image}" alt="${game.name}" style="width: 30px; height: 30px; border-radius: 5px; margin-right: 10px;">
                            <div>${game.name}</div>
                        `;
                        item.onclick = () => window.location.href = game.url;
                        results.appendChild(item);
                    });
                    results.style.display = 'block';
                } else {
                    results.innerHTML = '<div class="search-item">No games found</div>';
                    results.style.display = 'block';
                }
            };
            
            // Hide search results when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.search-container')) {
                    document.getElementById('searchResults').style.display = 'none';
                }
            });
            
            // Navigation function
            window.nav = function(page) {
                window.location.href = 'https://www.unblockdev.com/' + page.toLowerCase();
            };
            
            // Initialize everything
            init();
        })();
    </script>
</body>
</html>
